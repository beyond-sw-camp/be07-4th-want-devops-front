<div align="center">
<p align="center"><img src="https://github.com/user-attachments/assets/99d9263c-7db9-4873-98d2-dd70102283c2" width="300px" height= "300px"></p>
  
![final_main](https://github.com/user-attachments/assets/258545e3-c4eb-4bac-9887-426dd3a7049a)

<div align="center">
🛫 기존에 경험하지 못한, 새로운 여행 플래너 !
  <br/>
  고민만 하던 여행 계획을 WANT 와 함께 한 번에 스케줄링 해보세요 !
</div>
<br/><br/><br/>

## 🚣🏻‍♀️ 팀원 소개

<table>  
  <tbody>
    <tr>
      <td align="center"><a href="https://github.com/jsangmin99"><img src="https://github.com/user-attachments/assets/3b9cc35b-b3b6-4762-b712-cd8ad8be25dc" width="50px" height="100px" alt=""/><br /><sub><b>팀장 : 전상민 </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/keemzleun"><img src="https://github.com/user-attachments/assets/25100313-4dad-461a-8eca-a8c9812eb803" width="60px" height="100px" alt=""/><br /><sub><b>팀원 : 김지은 </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/tteia"><img src="https://github.com/user-attachments/assets/79f6778e-49fb-4e8c-a0e2-127645daa2c7" width="50px" height="100px" alt=""/><br /><sub><b>팀원 : 최아영 </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/vydndrl"><img src="https://github.com/user-attachments/assets/a4303e46-5a52-4c08-a71e-f009029ba8ec" width="50px" height="100px" alt=""/><br /><sub><b>팀원 : 표웅기 </b></sub></a><br /></td>
    </tr>
  </tbody>
</table>
<br><br><br>

## 🛫 WANT 프로젝트 소개

<img width="511" src="https://github.com/user-attachments/assets/2f7bdb2a-c10e-4253-ae79-0c3fbca0deb8">
<pre><code> 
코로나19 이후, 여행의 패턴과 요구가 크게 변화했습니다.
사람들은 안전하고 개인화(맞춤화)된 여행을 원하며, 이에 따라 여행 계획을 세우는 데 있어 보다 세심한 접근을 요구하고 있습니다.
이러한 변화에 맞춰 개인화된 여행 플래너 WANT 는 여행자들이 더 나은 경험을 할 수 있도록 도와줍니다.
</code></pre>
<br><br><br>

## 📚 기술 스택

<img src="https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=openjdk&logoColor=white">
<img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white">
<img src="https://img.shields.io/badge/vuejs-%2335495e.svg?style=for-the-badge&logo=vuedotjs&logoColor=%234FC08D">
<img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=Redis&logoColor=white"> 
<img src="https://img.shields.io/badge/Amazon%20S3-569A31?style=for-the-badge&logo=Amazon%20S3&logoColor=white">
<img src="https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=HTML5&logoColor=white">
<img src="https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=CSS3&logoColor=white">
<img src="https://img.shields.io/badge/googleMaps-4285F4?style=for-the-badge&logo=googlemaps&logoColor=white">
<img src="https://img.shields.io/badge/Amazon%20CloudFront-6B728E.svg?style=for-the-badge&logo=amazoncloudfront&logoColor=white">
<img src="https://img.shields.io/badge/Amazon%20EKS-5A9BD3?style=for-the-badge&logo=amazoneks&logoColor=white"/>
<img src="https://img.shields.io/badge/Amazon%20ECR-4A6FFF.svg?style=for-the-badge&logo=amazonwebservices&logoColor=white">
<img src="https://img.shields.io/badge/Amazon%20ECS-FF9900?style=for-the-badge&logo=amazonecs&logoColor=white"/>
<img src="https://img.shields.io/badge/-aws elastic load balancing-8C4FFF?style=for-the-badge&logo=awselasticloadbalancing&logoColor=white"/>
<img src="https://img.shields.io/badge/-aws secrets manager-DD344C?style=for-the-badge&logo=awssecretsmanager&logoColor=white"/>
<br><br><br>

## ⚙️ WBS

<img width="942" alt="WANT_WBS" src="https://github.com/user-attachments/assets/db910a97-af76-454e-b4ac-6a8c1c944238">

[📋 WANT WBS 확인하기](https://docs.google.com/spreadsheets/d/1AKTX7JtqpI28EJqFKCD5n1wEYQKJhZEEVgXBd4mYtGw/edit?gid=0#gid=0)
<br><br><br>

## ⚙️ 요구사항 명세서
<img width="942" alt="WANT_WBS" src="https://github.com/user-attachments/assets/62d89535-2e7c-4310-a4e6-20e4709fbd28">

[📋 WANT 요구사항 명세서 확인하기](https://docs.google.com/spreadsheets/d/1AKTX7JtqpI28EJqFKCD5n1wEYQKJhZEEVgXBd4mYtGw/edit?gid=0#gid=0)
<br><br><br>

## ⚙️ ERD CLOUD

<img width="852" alt="스크린샷 2024-08-21 오전 9 15 22" src="https://github.com/user-attachments/assets/2904ca58-69fb-4da9-b0fc-bbaaaebaa9de">
<br><br><br>

## 📡 배포 Architecture
</div>

### 🗞️ CI / CD 설계도
![image](https://github.com/user-attachments/assets/68b3c573-c401-4cb0-9b86-2f54bd8ba834)

### 📋 K8S BACKEND SCRIPT

<details>
  <summary><b>hpa.yml</b></summary>
  <div markdown="1">
  
  ```yml
  # 메트릭 서버 설치 (파드의 자원상황 모니터링 툴)
  # kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
  # Horizontal pod autoscaler (수평확장)
  # 컨테이너 자동 확장
  #  10분이 지나고 나서 부하가 없을시에 자동으로 기본 POD 대수로 돌아옴
  apiVersion: autoscaling/v2
  kind: HorizontalPodAutoscaler
  # 어떤 상황에 어떤것을 늘릴지 정해야함
  metadata:
    name: want-hpa
  
  spec:
    scaleTargetRef:
      apiVersion: apps/v1
      kind: Deployment
      name: want-deployment
    minReplicas: 2
    maxReplicas: 4
    # CPU 사용률이 50% 넘어가면 실행
    metrics:
      - type: Resource
        resource:
          name: cpu
          target:
            type: Utilization
            averageUtilization: 70
      - type: Resource
        resource:
          name: memory
          target:
            type: Utilization
            averageUtilization: 80
            
  # 부하 테스트 쉘스크립트
  # kubctl exec -it 파드명 /bin/bash -n sm
  # while true; do curl http://ordersystem-service/product/list; sleep 1; done
  
  # 부하 모니터링
  # -w : whatch 옵션을 의미
  # kubectl get hpa ordersystem-hpa -n sm -w 
  ```

  </div>
</details>
  
<details>
  <summary><b>want_depl.yml</b></summary>
  <div markdown="2">
  
  ```yml
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: want-deployment
  spec:
    replicas: 2
    selector:
      matchLabels:
        app: want
    template:
      metadata:
        labels:
          app: want
      spec:
        containers:
          - name: want
            # AWS의 ECR를 사용 
            image: 346903264902.dkr.ecr.ap-northeast-2.amazonaws.com/want:latest
            ports: 
              - containerPort: 8088
            resources:
              limits: # 최대 할당량
                cpu: "0.75"
                memory: "600Mi"
              requests: # 최소 할당량
                cpu: "0.25"
                memory: "250Mi"
            env:
              - name: local.redis.host
                valueFrom:
                  secretKeyRef:
                    key: local.redis.host
                    name: want-secrets
              - name: cloud.aws.s3.bucket
                valueFrom:
                  secretKeyRef:
                    key: cloud.aws.s3.bucket
                    name: want-secrets
              - name: google.client-id
                valueFrom:
                  secretKeyRef:
                    key: google.client-id

            # 무중단 배포를 위한 컨테이너 health check
            readinessProbe:
              httpGet:
                path: /actuator/health
                port: 8088
            # 컨테이너 시작후 지연시간 설정
              initialDelaySeconds: 10
            # 확인 반복 주기
              periodSeconds: 10
            # 요청 timeout 설정
              timeoutSeconds: 1
            # 성공 인식 횟수 설정
              successThreshold: 1
            # 연속 실패 횟수 설정 : 연속적으로 3번을 실패하면 건강하지 않은 상태로 판단하여 기존 서버 종료시키지 않음
              failureThreshold: 3
```
  </div>
</details>

<details>
  <summary><b>certificate.yml</b></summary>
  <div markdown="3">
    
```yml
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
   # 인증서 서버 주소. 해당 서버의 리소스를 통해 인증서 발행
    server: https://acme-v02.api.letsencrypt.org/directory
    #인증서의 사용자
    email: jsangmin99@gmail.com
    privateKeySecretRef:
      name: letsencrypt-prod
    solvers:
    - http01:
        ingress:
          class: nginx

# 3. Certificate 생성
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: -
spec:
  secretName: -
  duration: 2160h  # 90일동안 유효함
  renewBefore: 360h # 15일 전에 갱신된다.
  issuerRef:
    name: letsencrypt-prod
    kind: ClusterIssuer
  commonName: -
  dnsNames:
  - s-
```

  </div>
</details>

<details>
  <summary><b>want_ingress.yml</b></summary>
  <div markdown="4">
    
```yml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: want-ingress
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
spec:
  tls:
  - hosts:
    - server.abs.co.kr
    secretName: abc-tls
  rules:
    - host: server.avs.co.kr
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: want-service
                port:
                  number: 80
```

  </div>
</details>

<details>
  <summary><b>want_service.yml</b></summary>
  <div markdown="5">
    
```yml
apiVersion: v1
kind: Service
metadata:
  name: want-service
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 80 # service Port를 의미,
      targetPort: 8088 #service가 라우팅해줄 대상의 port
  selector:
    app: want
```

  </div>
</details>

<details>
  <summary><b>deploy_want_k8s.yml</b></summary>
  <div markdown="6">
    
```yml
name: deploy_want_k8s
on:
  push:
    branches:
      - main
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Set up JDK 11
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '11'

      - name: Cache Gradle Wrapper and JIB Cache
        uses: actions/cache@v3
        with:
          path: |
            ~/.gradle/caches
            ~/.gradle/wrapper

      - name: install kubctl
        uses: azure/setup-kubectl@v3
        with:
          version: 'v1.26.0'
        id: install

      - name: Configure AWS credentials
        uses: confis-credentials@v1
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ap-northeast-2

      - name: update cluster information
        run: aws eks update-kubeconfig --name 5-team-cluster --region ap-northeast-2

      - name: login to ECR
        id: login-ecr
        uses: aab@v1

      - name: Build, tag, and push image to Amazon ECR with Jib
        run: |
          ./gradlew :abc.ecr.ap-northeast-2.amazonaws.com/want:latest

      - name: kubectl apply
        run: |
          kubectl apply -f ./k8s/want_depl.yml
          kubectl rollout restart deployment want-deployment
```

  </div>
</details>

### 📋 S3 FRONTEND SCRIPT

<details>
  <summary><b>deploy_s3.yml</b></summary>
  <div markdown="1">
    
```yml
name: deploy to aws s3
# 1. 트리거 생성(main브랜치에 push 될때 현재 스크립트 실행 트리거 발동)
on:
  push:
    branches:
      - main
# 워크플로우는 하나 이상의 작업(job)으로 구성, 여기서는 하나의 작업만을 정의 (job의 이름 은 사용자 맘대로)
jobs:
  build-and-deploy:
    runs-on : ubuntu-latest
    # 각 작업은  여러 step(단계)로 구성
    steps:
    # actions 는 github에서 제공되는 공식 워크플로우
    # chekout은 현재 repo의 main브랜치 소스코드를 카피
      - name: source code checkout
        uses: actions/checkout@v2
# 2.  노드 설치
      - name: setup node jobs
        uses: actions/setup-node@v2
        with: 
          node-version: '20'

      - name: Create .env file
        run: |
          echo "VUE_APP_API_BASE_URL=${{ secrets.VUE_APP_API }}" >> .env
          echo "VUE_APP_GOOGLE_CLIENT_ID=${{ secrets.VUE_APP_GOOGLE }}" >> .env
          echo "VUE_APP_GOOGLE_REDIRECT_URI=${{ secrets.VUE_APP_REDIRECT_URI }}" >> .env
          echo "VUE_APP_GOOGLE_MAPS_API_KEY=${{ secrets.VUE_APP_API_KEY }}" >> .env
  
# 3. npm install
      - name: npm install
        working-directory: .
        run: npm install
# 4. npm build
      - name: npm buildwer
        working-directory: .
        run: npm run build
      
      - name: setup aws cli
        uses: aavs-aws-credentials@v2
        with:
          aws-access-key-id: ${{secrets.AWS_ACESS_KEY}}
          aws-secret-access-key: ${{secrets.AWS_SECRET}}
          aws-region: ap-northeast-2

      - name: clear s3 bucket
        run: aws s3 rm s3://want.devhot.kr/ --recursive

      - name: upload file in s3 bucket
        run: aws s3 cp ./dist s3://want.devhot.kr/ --recursive
      

      - name: invalidate cloudfront cache
        run: aws cloudfront create-invalidation --distribution-id ${{secrets.DISTRIBUTION_ID}} --paths "/*"
```

  </div>
</details>

### 🐳 docker-compose
<details>
  <summary><b>docker-copmose.yml</b></summary>
  <div markdown="3">
    
```yml
name: CI/CD Pipeline  
  
on:  
  push:  
    branches:  
      - dev  
  
jobs:  
  build:  
    runs-on: ubuntu-latest  
  
    steps:  
  
      - name: Checkout code  
        uses: actions/checkout@v2  
  
      - name: Set up JDK 11  
        uses: actions/setup-java@v2  
        with:  
          java-version: '11'  
          distribution: 'temurin'  
  
  
      - name: Cache Gradle packages  
        uses: actions/cache@v3  
        with:  
          path: ~/.gradle/caches  
          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}  
          restore-keys: |  
            ${{ runner.os }}-gradle-  
      - name: Cache Docker layers  
        uses: actions/cache@v3  
        with:  
          path: /home/runner/.cache/docker  
          key: ${{ runner.os }}-docker-${{ github.sha }}  
          restore-keys: |  
            ${{ runner.os }}-docker-  
      - name: Docker Hub login  
        uses: docker/login-action@v2  
        with:  
          username: ${{ secrets.DOCKER_USERNAME }}  
          password: ${{ secrets.DOCKER_PASSWORD }}  
  
      - name: Build with Jib  
        run: ./gradlew jib --image=j00/want_project:latest  
  
  
  
  deploy:  
    runs-on: ubuntu-latest  
    needs: build  
  
    steps:  
      - name: SSH to EC2  
        uses: appleboy/ssh-action@v0.1.10  
        with:  
          host: ${{ secrets.EC2_HOST }}  
          username: ubuntu  
          key: ${{ secrets.EC2_SSH_KEY }}  
          port: 22  
          script: |  
            cd ~/want            if ! type docker > /dev/null; then              sudo snap install docker || echo "docker install failed"            else              echo "docker is already installed"            fi            sudo docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}            chmod +x deploy.sh            ./deploy.sh %% jsn00/want_project:latest %%
```

  </div>
</details>

<br/>
<br/>

## 📑 테스트 결과
### 🧪 배포 환경 서비스 확인
#### want.devhot.kr 주소창 확인 ✅
![전체 서비스 둘러보기](https://github.com/user-attachments/assets/ad60fa1e-9aa7-46fc-a5e8-246fb53c953d)
![블럭 가져가기](https://github.com/user-attachments/assets/8e42dcc9-5bde-4f23-9e5e-68ba81fe1907)

### 🧪 메인 페이지 관련 기능 테스트

<details>
  <summary><b>소셜 로그인 / 로그아웃</b></summary>
  <div markdown="1">
    <ul>
      <li>구글 API 를 이용한 로그인 서비스</li>
      <img src="https://github.com/user-attachments/assets/a16519e8-1d33-4f07-9f3d-7ff8fcbc8c56" width=70%>
    </ul>
  </div>
    <div markdown="2">
    <ul>
      <li>여행지, 날짜, 제목 작성 후 일정 생성</li>
      <img src="https://github.com/user-attachments/assets/9a1ddf94-79ec-43e7-9606-0f1cae1bf7f3" width=70%>
    </ul>
  </div>
</details>

### 🧪 마이 페이지 관련 기능 테스트

<details>
  <summary><b>일정 조회 / 일정 탈퇴</b></summary>
  <div markdown="3">
    <ul>
      <li>목록에서 일정 조회 / 조회된 일정 탈퇴</li>
      <img src="https://github.com/user-attachments/assets/df0f07af-18be-404f-8435-5ac363e61f04" width=70%>
    </ul>
  </div>
</details>

### 🧪 추천 페이지 관련 기능 테스트

<details>
  <summary><b>인기 여행지 조회 및 명소 스크랩</b></summary>
  <div markdown="5">
    <ul>
      <li>사용자들이 많이 등록한 도시별로 조회</li>
      <img src="https://github.com/user-attachments/assets/4ad88c91-1f51-4e31-a00b-7cac1d77459d" width=70%>
    </ul>
  </div>
    <div markdown="6">
    <ul>
      <li>내 일정으로 추천 명소 스크랩</li>
      <img src="https://github.com/user-attachments/assets/af074305-c51e-4c57-b34e-5ee7fa6adf41" width=70%>
    </ul>
  </div>
</details>

### 🧪 일정 페이지 관련 기능 테스트

<details>
  <summary><b>일정 초대 및 일정 탈퇴 / 일정 경로 조회</b></summary>
  <div markdown="7">
    <ul>
      <li>일정에 없는 회원 이메일로 멤버 초대</li>
      <img src="https://github.com/user-attachments/assets/9498c12b-f538-4a84-801a-9b791361e8db" width=70%>
      <img src="https://github.com/user-attachments/assets/eb4088ed-4303-495b-b0f9-f1070dc180a9" width=70%>
    </ul>
  </div>
    <div markdown="8">
    <ul>
      <li>소속된 일정에서 탈퇴하기</li>
      <img src="https://github.com/user-attachments/assets/e0e59a66-44f7-4e92-96dd-a563891476cc" width=70%>
    </ul>
  </div>
</details>

<details>
  <summary><b>일정 경로 조회</b></summary>
  <div markdown="9">
    <ul>
      <li>상단 지도 아이콘 클릭 시 해당 일정의 경로 표시</li>
      <img src="https://github.com/user-attachments/assets/79ac4b71-6e02-4d62-99d4-13c9812bc53b" width=70%>
    </ul>
  </div>
</details>

<details>
  <summary><b>스케줄러 Drag & Drop</b></summary>
  <div markdown="10">
    <ul>
      <li>스케줄러에서 리스트로 블럭 이동 (일정 해제)</li>
      <img src="https://github.com/user-attachments/assets/955d70ae-8892-470f-91cc-f900075705cb" width=70%>
    </ul>
  </div>
    <div markdown="11">
    <ul>
      <li>리스트에서 스케줄러로 블럭 이동 (일정 등록)</li>
      <img src="https://github.com/user-attachments/assets/d73bc982-45a8-4b4a-b30d-56b639cd9e45" width=70%>
    </ul>
  </div>
</details>

### 🧪 블럭 관련 기능 테스트
<details>
  <summary><b>블럭 상세페이지 연결</b></summary>
  <div markdown="12">
    <ul>
      <li>스케줄러에 등록된 블럭 클릭 시 상세 페이지로 이동</li>
      <img src="https://github.com/user-attachments/assets/48b82686-beb7-45da-ab48-6f028aca1e5a" width=70%>
    </ul>
  </div>
    <div markdown="13">
    <ul>
      <li>리스트에서 등록된 블럭 클릭 시 상세 페이지로 이동</li>
      <img src="https://github.com/user-attachments/assets/632a97dd-d7f4-4e9f-bcf5-1793c23ce637" width=70%>
    </ul>
  </div>
</details>

<details>
  <summary><b>블럭에 사진 등록</b></summary>
  <div markdown="14">
    <ul>
      <li>블럭에 사진 등록 / 여러장 등록 시 슬라이더 처리</li>
      <img src="https://github.com/user-attachments/assets/7c425103-06a1-4be2-bc29-68c20a0203cc" width=70%>
    </ul>
  </div>
</details>

<details>
  <summary><b>GoogleMap 연동</b></summary>
  <div markdown="15">
    <ul>
      <li>GoogleMap 을 통해 장소 지정 및 확인</li>
      <img src="https://github.com/user-attachments/assets/3e654c47-b535-43c2-a43a-6ac1217c9509" width=70%>
    </ul>
  </div>
</details>

<details>
  <summary><b>댓글 달기, 좋아요 달기</b></summary>
  <div markdown="16">
    <ul>
      <li>같은 프로젝트 팀원과 댓글, 좋아요 기능 연동</li>
      <img src="https://github.com/user-attachments/assets/81e5279c-b995-4248-b6d6-897dfd618ff4" width=70%>
    </ul>
  </div>
</details>

<details>
  <summary><b>블럭 상세 정보 수정 및 블럭 삭제 가능</b></summary>
  <div markdown="17">
    <ul>
      <li>블럭 상세 페이지에서 편집</li>
      <img src="https://github.com/user-attachments/assets/b72f7e53-2769-4ba0-864a-b58cf53719a4" width=70%>
    </ul>
        <ul>
      <li>블럭 상세 페이지에서 삭제</li>
      <img src="https://github.com/user-attachments/assets/2d2a0b3b-d688-408e-b51a-dd656f54624b" width=70%>
    </ul>
  </div>
</details>

